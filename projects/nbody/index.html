<!DOCTYPE html>
<html >
<head><meta charset="utf-8">
<title>N-body Modelling of Young Stellar Systems</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="N-body Modelling of Young Stellar Systems">
<meta name="description" content="Harnessing the power of C++ and CUDA, I modeled the cosmic dance of young stars for my final year Astrophysics project, unveiling the gravitational mysteries of stellar cores through dynamic N-body simulations.">
<meta property="og:description" content="Harnessing the power of C++ and CUDA, I modeled the cosmic dance of young stars for my final year Astrophysics project, unveiling the gravitational mysteries of stellar cores through dynamic N-body simulations."><link rel="modulepreload" href="/projects/nbody/_payload.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/entry.ae246550.js"><link rel="preload" as="style" href="/_nuxt/entry.205349d8.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRenderer.bcbf00a9.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/runtime-core.esm-bundler.c0c92f57.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.e3d9def8.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/_plugin-vue_export-helper.c27b6911.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/document-driven.c32a1447.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/project.cf9f4f3b.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH2.e03688e7.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseP.7a14b8bf.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseStrong.f52eede9.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseOl.10d538bc.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseLi.294434fe.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH3.52d68a4c.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseA.c7ae6832.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseEm.7b13c7eb.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Terminal.00588cbd.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/home.2e800ee7.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/client-db.5ed1b356.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ColorModeSwitch.a268d7f3.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/component.vue3.32efa6ec.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/UnoIcon.31a7f5c5.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/welcome.7a8b06a6.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/error-component.8415e5f2.js"><link rel="stylesheet" href="/_nuxt/entry.205349d8.css"><style>@import url("https://fonts.googleapis.com/css2?family=Lexend:wght@400;700&family=Rubik:ital,wght@0,400;0,500;0,800;1,400;1,500;1,800&display=swap");@import url("https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css");@import url("https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.css");#app{min-height:100vh;position:relative}#page-container{min-height:calc(100vh - 5.5rem);position:relative}#content-wrap{padding-bottom:1.5rem}#navbar{position:sticky;top:0;width:100%;z-index:10}#footer{bottom:0;height:3.7rem;position:absolute;width:100%}::-webkit-scrollbar-track:hover{background:transparent}::-webkit-scrollbar-track{background:red}.scroller{height:100px;overflow-y:scroll;scrollbar-color:#fff transparent;scrollbar-width:auto;width:100%}</style><style>main[data-v-d79b1516] h2{--at-apply:font-rubik text-yellow-400 text-3xl sm:text-4xl md:text-4xl glow-yellow-txt font-bold pt-7 pb-1}main[data-v-d79b1516] h3{--at-apply:font-rubik text-lime-400 text-2xl sm:text-3xl md:text-3xl pt-7 pb-2 font-bold}main[data-v-d79b1516] h4{--at-apply:font-rubik text-lime-400 text-xl sm:text-2xl md:text-2xl pt-7 pb-2 font-medium}main[data-v-d79b1516] li::marker{--at-apply:font-ubuntu text-gray-400 glow-cyan-txt font-bold text-18.5px}main[data-v-d79b1516] li{--at-apply:font-ubuntu text-cyan-100 text-18.5px}main[data-v-d79b1516] p{--at-apply:font-ubuntu text-cyan-100 text-18.5px glow-cyan-txt font-medium py-2 leading-relaxed}main[data-v-d79b1516] .math-display{--at-apply:text-xl text-slate-200 tracking-wider}main[data-v-d79b1516] a:not(h1 a):not(h2 a):not(h3 a):not(h4 a):not(h5 a):not(h6 a):not(.toc-item){--at-apply:font-black text-blue-300 glow-cyan-txt underline decoration-1}main[data-v-d79b1516] pre code{--at-apply:text-16px font-jbmono}.toc-item-link[data-v-d79b1516]{display:flex}.vertical-line[data-v-d79b1516]{margin-right:8px}.child-text[data-v-d79b1516]{align-self:flex-start}</style><style>.terminal[data-v-30a1bc6a]{--at-apply:font-jbmono;background:#6f5e793b;border-radius:10px;box-shadow:4px 4px 32px -8px #000;color:#fff;margin:20px auto;padding-left:12px;padding-right:12px;padding-top:5px;width:100%}.title-container[data-v-30a1bc6a]{display:flex;flex-grow:1;justify-content:flex-end}.terminal-title[data-v-30a1bc6a]{--at-apply:font-jbmono text-cyan-200 glow-cyan-txt font-italic font-bold text-15px;margin-right:5px;margin-top:-5px}.terminal-header[data-v-30a1bc6a]{display:flex;justify-content:space-between;margin-bottom:-10px;padding-top:5px}.terminal-buttons[data-v-30a1bc6a]{display:flex}.terminal-button[data-v-30a1bc6a]{border-radius:50%;height:13px;margin-right:5px;width:13px}.terminal-button-red[data-v-30a1bc6a]{background-color:#ff5f56}.terminal-button-yellow[data-v-30a1bc6a]{background-color:#ffbd2e}.terminal-button-green[data-v-30a1bc6a]{background-color:#27c93f}.terminal-body[data-v-30a1bc6a]{word-wrap:break-word;--at-apply:flex justify-content;margin-top:20px;overflow:auto;padding-bottom:20px;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap}</style><style>pre code .line{display:block;min-height:1rem}</style><script>"use strict";(()=>{const a=window,e=document.documentElement,m=["dark","light"],c=window.localStorage.getItem("nuxt-color-mode")||"system";let n=c==="system"?f():c;const l=e.getAttribute("data-color-mode-forced");l&&(n=l),i(n),a["__NUXT_COLOR_MODE__"]={preference:c,value:n,getColorScheme:f,addColorScheme:i,removeColorScheme:d};function i(o){const t=""+o+"",s="";e.classList?e.classList.add(t):e.className+=" "+t,s&&e.setAttribute("data-"+s,o)}function d(o){const t=""+o+"",s="";e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(t,"g"),""),s&&e.removeAttribute("data-"+s)}function r(o){return a.matchMedia("(prefers-color-scheme"+o+")")}function f(){if(a.matchMedia&&r("").media!=="not all"){for(const o of m)if(r(":"+o).matches)return o}return"light"}})();
</script></head>
<body ><div id="__nuxt"><div id="app" class="page-bg"><nav data-headlessui-state class="navb-css-1 backdrop-blur-lg" id="navbar"><div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex items-center justify-between h-12"><div class="flex items-center"><div class="flex-shrink-0"><a class="flex items-center nuxt-link-exact-active" href="/"><img class="block h-9 w-auto" src="/logo_small.gif" alt="quartzar"><span class="font-rubik font-black text-xl text-cyan-100 ml-2 glow-cyan-txt"> Joseph Dorn </span></a></div><div class="hidden sm:block sm:ml-6"><div class="flex"><div class="relative flex ml-0"><!--[--><!--[--><a href="/projects" class="px-2 py-2 rounded-md font-rubik text-sm font-medium text-cyan-100 glow-cyan-txt no-underline hover:underline hover:underline-offset-6 transition duration-150 ease-in-out">Projects</a><a href="/about" class="px-2 py-2 rounded-md font-rubik text-sm font-medium text-cyan-100 glow-cyan-txt no-underline hover:underline hover:underline-offset-6 transition duration-150 ease-in-out">About</a><!--]--><!--]--></div></div></div></div><div class="hidden sm:ml-6 sm:block"><div class="flex items-center space-x-2"><a href="https://github.com/quartzar" title="GitHub" class="p-1 border-2 border-transparent hover:text-gray-300 transition-all ease-in-out"><i class="fa fa-github github" id="github"></i></a></div></div></div></div><div class="navb-border"></div></nav><div id="page-container" class="flex flex-col min-h-screen"><div id="content-wrap" class="flex-grow"><!--[--><div class="document-driven-page transition-container"><!--[--><div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8" data-v-d79b1516><header class="mt-10 mx-auto max-w-screen-xl px-1 sm:mt-12 md:mt-16 lg:mt-32 relative" data-v-d79b1516><div class="text-left relative" data-v-d79b1516><h1 class="font-rubik font-black text-cyan-200 text-3xl sm:text-4xl md:text-5xl glow-cyan-txt" data-v-d79b1516>N-body Modelling of Young Stellar Systems</h1><h2 class="font-rubik text-slate-200 text-opacity-80 text-md sm:text-xl md:text-xl glow-cyan-txt pb-20 font-medium" data-v-d79b1516>Journey through the stages of my final year Astrophysics project.</h2></div></header><main class="pb-20 lg:pb-28 px-1 pt-3 relative" data-v-d79b1516><div class="grid gap-16 grid-cols-4" data-v-d79b1516><section class="col-span-3" data-v-d79b1516><div class="contentRenderer" data-v-d79b1516><h2 id="intro"><a href="#intro"><!--[-->Intro<!--]--></a></h2><p><!--[-->Stellar dynamics, especially in the realm of young binary and multiple star systems, often seem more like the stuff of sci-fi than reality. Yet these dynamics dictate the cosmic dance that stars partake in, and understanding them holds the key to unlocking many secrets of our universe.<!--]--></p><p><!--[-->To delve into this complex web, I recently completed my third year Astrophysics BSc project where I investigated the formation and evolution of young stellar systems. To do this, I needed to develop a gravitational <strong><!--[-->N-body simulation<!--]--></strong>â€”a computational method used to predict the individual motions of a group of celestial objects interacting with each other gravitationally.<!--]--></p><p><!--[-->The project had a twofold aim:<!--]--></p><ol class="list-decimal space-y-1 pl-5 py-3"><!--[--><li><!--[-->Construct and validate an N-body simulator capable of accurately modelling the dynamical evolution of small-N systems,<!--]--></li><li><!--[-->Use this simulator to investigate the profound influence of initial conditions on star ejection patterns, binary formation, and the overall evolution of these systems.<!--]--></li><!--]--></ol><p><!--[-->In this post, I will share the programmatic and analytical approaches that I adopted to bring this project to fruition. But first, a brief primer on N-body simulations.<!--]--></p><h3 id="what-are-n-body-simulations"><a href="#what-are-n-body-simulations"><!--[-->What are N-body Simulations?<!--]--></a></h3><p><!--[-->In physics, the <a href="https://en.wikipedia.org/wiki/N-body_problem" rel="nofollow"><!--[-->N-body problem<!--]--></a> involves attempting to predict the motion of multiple celestial objects, or &#39;<em><!--[-->bodies<!--]--></em>&#39;, that are interacting with each other <em><!--[-->gravitationally<!--]--></em>. For a system of two bodies, there exists a clear-cut solution, and even for the three-body problem, a solution can be found in its restricted form, which essentially involves two bodies and a third one of negligible mass. However, for systems with four or more bodies, no general analytical solution exists...<!--]--></p><p><!--[-->However, thanks to advancements in computational power and algorithms, we are not left helpless in the face of this challenge. Enter <a href="https://en.wikipedia.org/wiki/N-body_simulation" rel="nofollow"><!--[--><strong><!--[-->N-body simulations<!--]--></strong><!--]--></a>, a powerful computational tool that provides a numerical solution to this problem. These simulations can handle the dynamical interactions of <em><!--[-->N<!--]--></em> number of objects or <em><!--[-->bodies<!--]--></em> in a system, where each object influences every other. In our context, these &#39;bodies&#39; refer to protostellar stars whose interactions are governed by gravitational forces.<!--]--></p><h2 id="the-physics"><a href="#the-physics"><!--[-->The Physics<!--]--></a></h2><p><!--[-->N-body simulations generally involve the following steps:<!--]--></p><ol class="list-decimal space-y-1 pl-5 py-3"><!--[--><li><!--[--><strong><!--[-->Initialisation<!--]--></strong>: The initial conditions of the system are defined, including the number of bodies, their masses, positions, velocities, and other relevant parameters.<!--]--></li><li><!--[--><strong><!--[-->Force Calculations<!--]--></strong>: The forces between each pair of bodies are calculated.<!--]--></li><li><!--[--><strong><!--[-->Integration<!--]--></strong>: The equations of motion are integrated to determine the new positions and velocities of the bodies.<!--]--></li><li><!--[--><strong><!--[-->Analysis<!--]--></strong>: The results are analysed to glean insights into the system&#39;s evolution.<!--]--></li><!--]--></ol><p><!--[-->While <strong><!--[-->initialisation<!--]--></strong> and <strong><!--[-->analysis<!--]--></strong> are relatively self-explanatory, the <strong><!--[-->force calculations<!--]--></strong> and <strong><!--[-->integration<!--]--></strong> steps are where things get interesting. There are a number of different algorithms that can be used to compute the pair-wise forces between the bodies, each with their own advantages and disadvantages.<!--]--></p><p><!--[-->Let&#39;s first take a look at a simple example of the equations of motion for a system of two bodies. Under Newtonian gravity, the force between two bodies is given by:<!--]--></p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">F</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord">âˆ’</span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7079em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathbf">r</span></span><span style="top:-3.0134em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span></span></span></span><span class="mpunct">,</span></span></span></span></span></div><p><!--[-->where <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span></span></span></span></span> is the gravitational constant, <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> and <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> are the masses of the two bodies, <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span></span> is the distance between them, and <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7079em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7079em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathbf">r</span></span><span style="top:-3.0134em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span></span></span></span></span></span></span></span> is the unit vector pointing from the first body to the second. Seems simple enough, right?<!--]--></p><p><!--[-->Before we adapt this equation to a system of <em><!--[-->N<!--]--></em> bodies, let&#39;s first think about how we could implement this in code for a system of 10 bodies. Logically, we would need to do the following:<!--]--></p><ol class="list-decimal space-y-1 pl-5 py-3"><!--[--><li><!--[-->For each body, loop through every other body in the system to calculate the force between them.<!--]--></li><li><!--[-->Sum the forces between each pair of bodies to get the total acceleration of each body.<!--]--></li><!--]--></ol><p><!--[-->This is known as a <strong><!--[-->pairwise force calculation<!--]--></strong> - and it get&#39;s really, <em><!--[-->really<!--]--></em> slow as the number of bodies, <em><!--[-->N<!--]--></em>, increases - with a computational complexity of <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>. Adapting the above equation for a system of <em><!--[-->N<!--]--></em> bodies, we can simply sum the forces between each pair of bodies:<!--]--></p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8361em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal">G</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:3.881em;vertical-align:-2.0527em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.5407em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1333em;"><span style="top:-3.15em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord mtight"><span class="mord mtight">1</span><span class="mrel mtight">â‰¤</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">â‰¤</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span><span style="top:-2.2611em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight"><span class="mrel mtight"><span class="mord vbox mtight"><span class="thinbox mtight"><span class="rlap mtight"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord mtight"><span class="mrel mtight">î€ </span></span></span><span class="fix"></span></span></span></span></span><span class="mrel mtight">=</span></span><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.6333em;"><span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.0527em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7959em;"><span style="top:-2.4231em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span><span style="top:-3.0448em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.413em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.099em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7079em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathbf">r</span></span><span style="top:-3.0134em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span></span></span></span></span></div><p><!--[-->where <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span> and <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span> are indices for the bodies, and <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> and <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.994em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7079em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathbf">r</span></span><span style="top:-3.0134em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> are the distance and unit vector between bodies <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span> and <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span> respectively. In code, this would look something like this:<!--]--></p><div class="terminal" data-v-30a1bc6a><div class="terminal-header" data-v-30a1bc6a><div class="terminal-buttons" data-v-30a1bc6a><div class="terminal-button terminal-button-red" data-v-30a1bc6a></div><div class="terminal-button terminal-button-yellow" data-v-30a1bc6a></div><div class="terminal-button terminal-button-green" data-v-30a1bc6a></div></div><div class="title-container" data-v-30a1bc6a><div class="terminal-title" data-v-30a1bc6a>Pairwise Force Calculation</div></div></div><pre class="terminal-body" data-v-30a1bc6a>            <!--[--><!--[--><!--[--><pre><code><span class="line" line="1"><span class="ct-149616">for</span><span class="ct-428888"> (</span><span class="ct-880161">int</span><span class="ct-428888"> i </span><span class="ct-149616">=</span><span class="ct-428888"> </span><span class="ct-589151">0</span><span class="ct-428888">; i </span><span class="ct-149616">&lt;</span><span class="ct-428888"> N; i</span><span class="ct-149616">++</span><span class="ct-428888">) 
</span></span><span class="line" line="2"><span class="ct-428888">{
</span></span><span class="line" line="3"><span class="ct-428888">    </span><span class="ct-880161">float</span><span class="ct-428888"> acceleration_i </span><span class="ct-149616">=</span><span class="ct-428888"> </span><span class="ct-589151">0.</span><span class="ct-149616">f</span><span class="ct-428888">;
</span></span><span class="line" line="4"><span>
</span></span><span class="line" line="5"><span class="ct-428888">    </span><span class="ct-149616">for</span><span class="ct-428888"> (</span><span class="ct-880161">int</span><span class="ct-428888"> j </span><span class="ct-149616">=</span><span class="ct-428888"> </span><span class="ct-589151">0</span><span class="ct-428888">; j </span><span class="ct-149616">&lt;</span><span class="ct-428888"> N; j</span><span class="ct-149616">++</span><span class="ct-428888">) 
</span></span><span class="line" line="6"><span class="ct-428888">    {
</span></span><span class="line" line="7"><span class="ct-561204">        // We don&#39;t want to calculate the force between a body and itself
</span></span><span class="line" line="8"><span class="ct-428888">        </span><span class="ct-149616">if</span><span class="ct-428888"> (i </span><span class="ct-149616">==</span><span class="ct-428888"> j) </span><span class="ct-149616">continue</span><span class="ct-428888">;
</span></span><span class="line" line="9"><span>
</span></span><span class="line" line="10"><span class="ct-561204">        // Calculate the distance vector between the bodies
</span></span><span class="line" line="11"><span class="ct-428888">        float3 r_ij </span><span class="ct-149616">=</span><span class="ct-428888"> </span><span class="ct-912143">positions</span><span class="ct-428888">[j] </span><span class="ct-149616">-</span><span class="ct-428888"> </span><span class="ct-912143">positions</span><span class="ct-428888">[i];
</span></span><span class="line" line="12"><span>
</span></span><span class="line" line="13"><span class="ct-561204">        // Calculate the magnitude of the distance vector
</span></span><span class="line" line="14"><span class="ct-428888">        </span><span class="ct-880161">float</span><span class="ct-428888"> r_squared </span><span class="ct-149616">=</span><span class="ct-428888"> </span><span class="ct-912143">r_ij</span><span class="ct-428888">.</span><span class="ct-912143">x</span><span class="ct-428888"> </span><span class="ct-149616">*</span><span class="ct-428888"> </span><span class="ct-912143">r_ij</span><span class="ct-428888">.</span><span class="ct-912143">x</span><span class="ct-428888"> </span><span class="ct-149616">+</span><span class="ct-428888"> </span><span class="ct-912143">r_ij</span><span class="ct-428888">.</span><span class="ct-912143">y</span><span class="ct-428888"> </span><span class="ct-149616">*</span><span class="ct-428888"> </span><span class="ct-912143">r_ij</span><span class="ct-428888">.</span><span class="ct-912143">y</span><span class="ct-428888"> </span><span class="ct-149616">+</span><span class="ct-428888"> </span><span class="ct-912143">r_ij</span><span class="ct-428888">.</span><span class="ct-912143">z</span><span class="ct-428888"> </span><span class="ct-149616">*</span><span class="ct-428888"> </span><span class="ct-912143">r_ij</span><span class="ct-428888">.</span><span class="ct-912143">z</span><span class="ct-428888">;
</span></span><span class="line" line="15"><span>
</span></span><span class="line" line="16"><span class="ct-561204">        // Calculate the unit vector pointing from body i to body j
</span></span><span class="line" line="17"><span class="ct-428888">        float3 r_hat </span><span class="ct-149616">=</span><span class="ct-428888"> r_ij </span><span class="ct-149616">/</span><span class="ct-428888"> </span><span class="ct-912143">sqrtf</span><span class="ct-428888">(r_squared);
</span></span><span class="line" line="18"><span>
</span></span><span class="line" line="19"><span class="ct-561204">        // Calculate the force between the bodies
</span></span><span class="line" line="20"><span class="ct-428888">        </span><span class="ct-880161">float</span><span class="ct-428888"> force_ij </span><span class="ct-149616">=</span><span class="ct-428888"> </span><span class="ct-149616">-</span><span class="ct-428888">G </span><span class="ct-149616">*</span><span class="ct-428888"> </span><span class="ct-912143">masses</span><span class="ct-428888">[j] </span><span class="ct-149616">/</span><span class="ct-428888"> r_squared;
</span></span><span class="line" line="21"><span>
</span></span><span class="line" line="22"><span class="ct-561204">        // Add the force to the total acceleration of body i
</span></span><span class="line" line="23"><span class="ct-428888">        acceleration_i </span><span class="ct-149616">+=</span><span class="ct-428888"> force_ij </span><span class="ct-149616">*</span><span class="ct-428888"> r_hat;
</span></span><span class="line" line="24"><span class="ct-428888">    }
</span></span><span class="line" line="25"><span class="ct-428888">    </span><span class="ct-149616">return</span><span class="ct-428888"> acceleration_i;
</span></span><span class="line" line="26"><span class="ct-428888">}</span></span></code></pre><!--]--><!--]--><!--]-->
      </pre></div><p><!--[--><em><!--[-->Snippet: Simplified C++ function to calculate the gravitational force between bodies.<!--]--></em><!--]--></p><p><!--[-->There is, however, an issue...<!--]--></p><p><!--[-->As the bodies approach each other, the force between them <em><!--[-->grows without bounds<!--]--></em>, and the simulation becomes unstable. To remedy this, we can introduce a <strong><!--[-->softening parameter<!--]--></strong>, <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">Ïµ</span></span></span></span></span>, which acts as a cut-off distance for the force calculation.<!--]--></p><p><!--[-->Skipping a few boring derivations (and including a nifty little trick that requires less FLOPS when running on a GPU... more on that later), we can write the force calculation for a system of <em><!--[-->N<!--]--></em> bodies as:<!--]--></p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6331em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.5519em;vertical-align:-1.4304em;"></span><span class="mord">âˆ’</span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8557em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mrel mtight">â‰¤</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">â‰¤</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.4304em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1214em;"><span style="top:-2.1704em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">âˆ¥</span><span class="mord"><span class="mord mathbf">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord">âˆ¥</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">Ïµ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9396em;"><span style="top:-3.3486em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathbf">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.1157em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span></span></span></span></span></div><p><!--[-->where <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5944em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> is the acceleration of body <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7305em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathbf">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> is the distance vector between bodies <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span> and <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span>, and <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">Ïµ</span></span></span></span></span> is the softening parameter. Notice that <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> is not required anymore, as <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5944em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>. Let&#39;s take a look at how this would look programatically:<!--]--></p><div class="terminal" data-v-30a1bc6a><div class="terminal-header" data-v-30a1bc6a><div class="terminal-buttons" data-v-30a1bc6a><div class="terminal-button terminal-button-red" data-v-30a1bc6a></div><div class="terminal-button terminal-button-yellow" data-v-30a1bc6a></div><div class="terminal-button terminal-button-green" data-v-30a1bc6a></div></div><div class="title-container" data-v-30a1bc6a><div class="terminal-title" data-v-30a1bc6a>CPU Force Calculation</div></div></div><pre class="terminal-body" data-v-30a1bc6a>            <!--[--><!--[--><!--[--><pre><code><span class="line" line="1"><span class="ct-880161">void</span><span class="ct-428888"> </span><span class="ct-912143">bodyBodyInteraction</span><span class="ct-428888">(</span><span class="ct-586139">float4</span><span class="ct-880161">*</span><span class="ct-428888"> pos, </span><span class="ct-586139">float4</span><span class="ct-880161">*</span><span class="ct-428888"> acc, </span><span class="ct-880161">int</span><span class="ct-428888"> N)
</span></span><span class="line" line="2"><span class="ct-428888">{
</span></span><span class="line" line="3"><span class="ct-428888">    </span><span class="ct-149616">for</span><span class="ct-428888"> (</span><span class="ct-880161">int</span><span class="ct-428888"> i </span><span class="ct-149616">=</span><span class="ct-428888"> </span><span class="ct-589151">0</span><span class="ct-428888">; i </span><span class="ct-149616">&lt;</span><span class="ct-428888"> N; i</span><span class="ct-149616">++</span><span class="ct-428888">)
</span></span><span class="line" line="4"><span class="ct-428888">    {
</span></span><span class="line" line="5"><span class="ct-428888">        </span><span class="ct-149616">for</span><span class="ct-428888"> (</span><span class="ct-880161">int</span><span class="ct-428888"> j </span><span class="ct-149616">=</span><span class="ct-428888"> </span><span class="ct-589151">0</span><span class="ct-428888">; j </span><span class="ct-149616">&lt;</span><span class="ct-428888"> N; j</span><span class="ct-149616">++</span><span class="ct-428888">)
</span></span><span class="line" line="6"><span class="ct-428888">        {
</span></span><span class="line" line="7"><span class="ct-428888">            </span><span class="ct-149616">if</span><span class="ct-428888"> (i </span><span class="ct-149616">==</span><span class="ct-428888"> j)
</span></span><span class="line" line="8"><span class="ct-428888">                </span><span class="ct-149616">continue</span><span class="ct-428888">;
</span></span><span class="line" line="9"><span class="ct-428888">            
</span></span><span class="line" line="10"><span class="ct-428888">            float3 r;
</span></span><span class="line" line="11"><span class="ct-428888">    
</span></span><span class="line" line="12"><span class="ct-561204">            // r_ij -&gt; AU [distance]
</span></span><span class="line" line="13"><span class="ct-428888">            </span><span class="ct-912143">r</span><span class="ct-428888">.</span><span class="ct-912143">x</span><span class="ct-428888"> </span><span class="ct-149616">=</span><span class="ct-428888"> </span><span class="ct-912143">pos</span><span class="ct-428888">[j].</span><span class="ct-912143">x</span><span class="ct-428888"> </span><span class="ct-149616">-</span><span class="ct-428888"> </span><span class="ct-912143">pos</span><span class="ct-428888">[i].</span><span class="ct-912143">x</span><span class="ct-428888">;
</span></span><span class="line" line="14"><span class="ct-428888">            </span><span class="ct-912143">r</span><span class="ct-428888">.</span><span class="ct-912143">y</span><span class="ct-428888"> </span><span class="ct-149616">=</span><span class="ct-428888"> </span><span class="ct-912143">pos</span><span class="ct-428888">[j].</span><span class="ct-912143">y</span><span class="ct-428888"> </span><span class="ct-149616">-</span><span class="ct-428888"> </span><span class="ct-912143">pos</span><span class="ct-428888">[i].</span><span class="ct-912143">y</span><span class="ct-428888">;
</span></span><span class="line" line="15"><span class="ct-428888">            </span><span class="ct-912143">r</span><span class="ct-428888">.</span><span class="ct-912143">z</span><span class="ct-428888"> </span><span class="ct-149616">=</span><span class="ct-428888"> </span><span class="ct-912143">pos</span><span class="ct-428888">[j].</span><span class="ct-912143">z</span><span class="ct-428888"> </span><span class="ct-149616">-</span><span class="ct-428888"> </span><span class="ct-912143">pos</span><span class="ct-428888">[i].</span><span class="ct-912143">z</span><span class="ct-428888">;
</span></span><span class="line" line="16"><span class="ct-428888">    
</span></span><span class="line" line="17"><span class="ct-561204">            // distance squared == dot(r_ij, r_ij) + softening^2
</span></span><span class="line" line="18"><span class="ct-428888">            </span><span class="ct-880161">float</span><span class="ct-428888"> distSqr </span><span class="ct-149616">=</span><span class="ct-428888"> </span><span class="ct-912143">r</span><span class="ct-428888">.</span><span class="ct-912143">x</span><span class="ct-428888"> </span><span class="ct-149616">*</span><span class="ct-428888"> </span><span class="ct-912143">r</span><span class="ct-428888">.</span><span class="ct-912143">x</span><span class="ct-428888"> </span><span class="ct-149616">+</span><span class="ct-428888"> </span><span class="ct-912143">r</span><span class="ct-428888">.</span><span class="ct-912143">y</span><span class="ct-428888"> </span><span class="ct-149616">*</span><span class="ct-428888"> </span><span class="ct-912143">r</span><span class="ct-428888">.</span><span class="ct-912143">y</span><span class="ct-428888"> </span><span class="ct-149616">+</span><span class="ct-428888"> </span><span class="ct-912143">r</span><span class="ct-428888">.</span><span class="ct-912143">z</span><span class="ct-428888"> </span><span class="ct-149616">*</span><span class="ct-428888"> </span><span class="ct-912143">r</span><span class="ct-428888">.</span><span class="ct-912143">z</span><span class="ct-428888">;
</span></span><span class="line" line="19"><span class="ct-428888">            distSqr </span><span class="ct-149616">+=</span><span class="ct-428888"> SOFTENING </span><span class="ct-149616">*</span><span class="ct-428888"> SOFTENING;
</span></span><span class="line" line="20"><span class="ct-428888">    
</span></span><span class="line" line="21"><span class="ct-561204">            // inverse distance cubed == 1 / distSqr^(3/2) [fastest method]
</span></span><span class="line" line="22"><span class="ct-428888">            </span><span class="ct-880161">float</span><span class="ct-428888"> distSixth </span><span class="ct-149616">=</span><span class="ct-428888"> distSqr </span><span class="ct-149616">*</span><span class="ct-428888"> distSqr </span><span class="ct-149616">*</span><span class="ct-428888"> distSqr;
</span></span><span class="line" line="23"><span class="ct-428888">            </span><span class="ct-880161">float</span><span class="ct-428888"> invDistCube </span><span class="ct-149616">=</span><span class="ct-428888"> </span><span class="ct-589151">1.0</span><span class="ct-149616">f</span><span class="ct-428888"> </span><span class="ct-149616">/</span><span class="ct-428888"> </span><span class="ct-912143">sqrtf</span><span class="ct-428888">(distSixth);
</span></span><span class="line" line="24"><span class="ct-428888">    
</span></span><span class="line" line="25"><span class="ct-561204">            // force = mass_j * inverse distance cube
</span></span><span class="line" line="26"><span class="ct-428888">            </span><span class="ct-880161">float</span><span class="ct-428888"> f </span><span class="ct-149616">=</span><span class="ct-428888"> </span><span class="ct-912143">pos</span><span class="ct-428888">[j].</span><span class="ct-912143">w</span><span class="ct-428888"> </span><span class="ct-149616">*</span><span class="ct-428888"> invDistCube;
</span></span><span class="line" line="27"><span class="ct-428888">    
</span></span><span class="line" line="28"><span class="ct-561204">            // acceleration = acceleration_i + force * r_ij
</span></span><span class="line" line="29"><span class="ct-428888">            </span><span class="ct-912143">force</span><span class="ct-428888">[i].</span><span class="ct-912143">x</span><span class="ct-428888"> </span><span class="ct-149616">+=</span><span class="ct-428888"> </span><span class="ct-912143">r</span><span class="ct-428888">.</span><span class="ct-912143">x</span><span class="ct-428888"> </span><span class="ct-149616">*</span><span class="ct-428888"> f </span><span class="ct-149616">*</span><span class="ct-428888"> (</span><span class="ct-880161">float</span><span class="ct-428888">)BIG_G;
</span></span><span class="line" line="30"><span class="ct-428888">            </span><span class="ct-912143">force</span><span class="ct-428888">[i].</span><span class="ct-912143">y</span><span class="ct-428888"> </span><span class="ct-149616">+=</span><span class="ct-428888"> </span><span class="ct-912143">r</span><span class="ct-428888">.</span><span class="ct-912143">y</span><span class="ct-428888"> </span><span class="ct-149616">*</span><span class="ct-428888"> f </span><span class="ct-149616">*</span><span class="ct-428888"> (</span><span class="ct-880161">float</span><span class="ct-428888">)BIG_G;
</span></span><span class="line" line="31"><span class="ct-428888">            </span><span class="ct-912143">force</span><span class="ct-428888">[i].</span><span class="ct-912143">z</span><span class="ct-428888"> </span><span class="ct-149616">+=</span><span class="ct-428888"> </span><span class="ct-912143">r</span><span class="ct-428888">.</span><span class="ct-912143">z</span><span class="ct-428888"> </span><span class="ct-149616">*</span><span class="ct-428888"> f </span><span class="ct-149616">*</span><span class="ct-428888"> (</span><span class="ct-880161">float</span><span class="ct-428888">)BIG_G;
</span></span><span class="line" line="32"><span class="ct-428888">        }
</span></span><span class="line" line="33"><span class="ct-428888">    }
</span></span><span class="line" line="34"><span class="ct-428888">}</span></span></code></pre><!--]--><!--]--><!--]-->
      </pre></div><style>.ct-149616{color:#859900;}
.ct-428888{color:#657B83;}
.ct-880161{color:#586E75;font-weight:bold;}
.ct-589151{color:#D33682;}
.ct-561204{color:#93A1A1;font-style:italic;}
.ct-912143{color:#268BD2;}
.ct-586139{color:#CB4B16;}</style></div></section><aside class="col-span-1 lg:flex lg:flex-col" data-v-d79b1516><div class="sticky top-16" data-v-d79b1516><header class="uppercase text-cyan-200 glow-cyan-txt font-rubik font-medium text-lg lg:mt-9 tracking-wider" data-v-d79b1516> Table of Contents </header><nav class="mt-4" data-v-d79b1516><ul data-v-d79b1516><!--[--><li class="toc-list" data-v-d79b1516><a class="text-cyan-200 hover:text-cyan-300 toc-item transition-colors duration-75 font-jbmono transition hover:scale-101 hover:duration-200 hover:font-black hover:transition ease-in-out duration-900 text-15px mb-2 block" role="button" href="#intro" data-v-d79b1516>Intro</a><ul data-v-d79b1516><!--[--><li class="ml-0 mt-2" data-v-d79b1516><a class="text-cyan-200 hover:text-cyan-300 toc-item toc-item-link transition-colors duration-75 font-jbmono transition hover:scale-101 hover:duration-200 hover:font-black hover:transition ease-in-out duration-900 text-15px mt--2 block" role="button" href="#what-are-n-body-simulations" data-v-d79b1516><span class="vertical-line" data-v-d79b1516>â”œ</span><span class="child-text border-left border-white" data-v-d79b1516>What are N-body Simulations?</span></a></li><!--]--></ul></li><li class="toc-list" data-v-d79b1516><a class="text-cyan-200 hover:text-cyan-300 toc-item transition-colors duration-75 font-jbmono transition hover:scale-101 hover:duration-200 hover:font-black hover:transition ease-in-out duration-900 text-15px mb-2 block" role="button" href="#the-physics" data-v-d79b1516>The Physics</a><!----></li><!--]--></ul></nav></div></aside></div></main></div><!--]--></div><!--]--></div></div><div class="grid grid-flow-row auto-rows-max justify-items-center mb-auto mt-auto" id="footer"><div><a href="https://github.com/quartzar" title="GitHub"><i class="fa fa-github github" id="github"></i></a></div><div class="op50 text-cyan-200 text-sm glow-cyan-txt"> Â© Joseph Dorn </div></div></div></div><script type="module">import p from "/projects/nbody/_payload.js";window.__NUXT__={...p,...((function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c_,c$,da,db,dc,dd,de,df,dg,dh){return {state:{"$scolor-mode":{preference:bE,value:bE,unknown:ap,forced:Y},"$sdd-pages":{"/projects/nbody":{_path:bF,_dir:bG,_draft:Y,_partial:Y,_locale:U,_empty:Y,title:bH,description:"Harnessing the power of C++ and CUDA, I modeled the cosmic dance of young stars for my final year Astrophysics project, unveiling the gravitational mysteries of stellar cores through dynamic N-body simulations.",head:"hi",subtitle:"Journey through the stages of my final year Astrophysics project.",date:"2023-06-23",tag:"C++ | CUDA",layout:bI,body:{type:"root",children:[{type:a,tag:bJ,props:{id:bK},children:[{type:c,value:bL}]},{type:a,tag:K,props:{},children:[{type:c,value:"Stellar dynamics, especially in the realm of young binary and multiple star systems, often seem more like the stuff of sci-fi than reality. Yet these dynamics dictate the cosmic dance that stars partake in, and understanding them holds the key to unlocking many secrets of our universe."}]},{type:a,tag:K,props:{},children:[{type:c,value:"To delve into this complex web, I recently completed my third year Astrophysics BSc project where I investigated the formation and evolution of young stellar systems. To do this, I needed to develop a gravitational "},{type:a,tag:R,props:{},children:[{type:c,value:"N-body simulation"}]},{type:c,value:"â€”a computational method used to predict the individual motions of a group of celestial objects interacting with each other gravitationally."}]},{type:a,tag:K,props:{},children:[{type:c,value:"The project had a twofold aim:"}]},{type:a,tag:bf,props:{},children:[{type:a,tag:ad,props:{},children:[{type:c,value:"Construct and validate an N-body simulator capable of accurately modelling the dynamical evolution of small-N systems,"}]},{type:a,tag:ad,props:{},children:[{type:c,value:"Use this simulator to investigate the profound influence of initial conditions on star ejection patterns, binary formation, and the overall evolution of these systems."}]}]},{type:a,tag:K,props:{},children:[{type:c,value:"In this post, I will share the programmatic and analytical approaches that I adopted to bring this project to fruition. But first, a brief primer on N-body simulations."}]},{type:a,tag:"h3",props:{id:bM},children:[{type:c,value:bN}]},{type:a,tag:K,props:{},children:[{type:c,value:"In physics, the "},{type:a,tag:ax,props:{href:"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FN-body_problem",rel:[bO]},children:[{type:c,value:"N-body problem"}]},{type:c,value:" involves attempting to predict the motion of multiple celestial objects, or '"},{type:a,tag:V,props:{},children:[{type:c,value:bP}]},{type:c,value:"', that are interacting with each other "},{type:a,tag:V,props:{},children:[{type:c,value:"gravitationally"}]},{type:c,value:". For a system of two bodies, there exists a clear-cut solution, and even for the three-body problem, a solution can be found in its restricted form, which essentially involves two bodies and a third one of negligible mass. However, for systems with four or more bodies, no general analytical solution exists..."}]},{type:a,tag:K,props:{},children:[{type:c,value:"However, thanks to advancements in computational power and algorithms, we are not left helpless in the face of this challenge. Enter "},{type:a,tag:ax,props:{href:"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FN-body_simulation",rel:[bO]},children:[{type:a,tag:R,props:{},children:[{type:c,value:"N-body simulations"}]}]},{type:c,value:", a powerful computational tool that provides a numerical solution to this problem. These simulations can handle the dynamical interactions of "},{type:a,tag:V,props:{},children:[{type:c,value:_}]},{type:c,value:" number of objects or "},{type:a,tag:V,props:{},children:[{type:c,value:bP}]},{type:c,value:" in a system, where each object influences every other. In our context, these 'bodies' refer to protostellar stars whose interactions are governed by gravitational forces."}]},{type:a,tag:bJ,props:{id:bQ},children:[{type:c,value:bR}]},{type:a,tag:K,props:{},children:[{type:c,value:"N-body simulations generally involve the following steps:"}]},{type:a,tag:bf,props:{},children:[{type:a,tag:ad,props:{},children:[{type:a,tag:R,props:{},children:[{type:c,value:"Initialisation"}]},{type:c,value:": The initial conditions of the system are defined, including the number of bodies, their masses, positions, velocities, and other relevant parameters."}]},{type:a,tag:ad,props:{},children:[{type:a,tag:R,props:{},children:[{type:c,value:"Force Calculations"}]},{type:c,value:": The forces between each pair of bodies are calculated."}]},{type:a,tag:ad,props:{},children:[{type:a,tag:R,props:{},children:[{type:c,value:"Integration"}]},{type:c,value:": The equations of motion are integrated to determine the new positions and velocities of the bodies."}]},{type:a,tag:ad,props:{},children:[{type:a,tag:R,props:{},children:[{type:c,value:"Analysis"}]},{type:c,value:": The results are analysed to glean insights into the system's evolution."}]}]},{type:a,tag:K,props:{},children:[{type:c,value:"While "},{type:a,tag:R,props:{},children:[{type:c,value:"initialisation"}]},{type:c,value:ak},{type:a,tag:R,props:{},children:[{type:c,value:"analysis"}]},{type:c,value:" are relatively self-explanatory, the "},{type:a,tag:R,props:{},children:[{type:c,value:"force calculations"}]},{type:c,value:ak},{type:a,tag:R,props:{},children:[{type:c,value:"integration"}]},{type:c,value:" steps are where things get interesting. There are a number of different algorithms that can be used to compute the pair-wise forces between the bodies, each with their own advantages and disadvantages."}]},{type:a,tag:K,props:{},children:[{type:c,value:"Let's first take a look at a simple example of the equations of motion for a system of two bodies. Under Newtonian gravity, the force between two bodies is given by:"}]},{type:a,tag:bg,props:{className:[z,bh]},children:[{type:a,tag:b,props:{className:[bi]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:"height:0.6861em;"},children:[]},{type:a,tag:b,props:{className:[e,P]},children:[{type:c,value:bj}]},{type:a,tag:b,props:{className:[I],style:ae},children:[]},{type:a,tag:b,props:{className:[S]},children:[{type:c,value:G}]},{type:a,tag:b,props:{className:[I],style:ae},children:[]}]},{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:"height:0.7667em;vertical-align:-0.0833em;"},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:c,value:bS}]},{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:aI}]},{type:a,tag:b,props:{className:[I],style:aq},children:[]},{type:a,tag:b,props:{className:[bk]},children:[{type:c,value:bT}]},{type:a,tag:b,props:{className:[I],style:aq},children:[]}]},{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:"height:1.7936em;vertical-align:-0.686em;"},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[ar,af]},children:[]},{type:a,tag:b,props:{className:[aJ]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:bU},children:[{type:a,tag:b,props:{style:bV},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,n],style:ay},children:[{type:c,value:D}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:bl},children:[{type:a,tag:b,props:{style:bm},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:c,value:ag}]}]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{style:bn},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[aK],style:bo},children:[]}]},{type:a,tag:b,props:{style:bp},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:aL},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:c,value:aM}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:T},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:aL},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:c,value:ag}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:T},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:"height:0.686em;"},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[al,af]},children:[]}]},{type:a,tag:b,props:{className:[I],style:az},children:[]},{type:a,tag:b,props:{className:[e,aN]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:aA},children:[{type:a,tag:b,props:{style:aO},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[e,P]},children:[{type:c,value:D}]}]},{type:a,tag:b,props:{style:aP},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[aQ],style:aR},children:[{type:a,tag:b,props:{className:[e]},children:[{type:c,value:aS}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[bq]},children:[{type:c,value:br}]}]}]}]}]}]},{type:a,tag:K,props:{},children:[{type:c,value:bs},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:"height:0.6833em;"},children:[]},{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:aI}]}]}]}]}]},{type:c,value:" is the gravitational constant, "},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:bt},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:aL},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:c,value:aM}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:T},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]}]},{type:c,value:ak},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:bt},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:aL},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:c,value:ag}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:T},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]}]},{type:c,value:" are the masses of the two bodies, "},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:bu},children:[]},{type:a,tag:b,props:{className:[e,n],style:ay},children:[{type:c,value:D}]}]}]}]}]},{type:c,value:" is the distance between them, and "},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:aA},children:[]},{type:a,tag:b,props:{className:[e,aN]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:aA},children:[{type:a,tag:b,props:{style:aO},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[e,P]},children:[{type:c,value:D}]}]},{type:a,tag:b,props:{style:aP},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[aQ],style:aR},children:[{type:a,tag:b,props:{className:[e]},children:[{type:c,value:aS}]}]}]}]}]}]}]}]}]}]}]},{type:c,value:" is the unit vector pointing from the first body to the second. Seems simple enough, right?"}]},{type:a,tag:K,props:{},children:[{type:c,value:"Before we adapt this equation to a system of "},{type:a,tag:V,props:{},children:[{type:c,value:_}]},{type:c,value:" bodies, let's first think about how we could implement this in code for a system of 10 bodies. Logically, we would need to do the following:"}]},{type:a,tag:bf,props:{},children:[{type:a,tag:ad,props:{},children:[{type:c,value:"For each body, loop through every other body in the system to calculate the force between them."}]},{type:a,tag:ad,props:{},children:[{type:c,value:"Sum the forces between each pair of bodies to get the total acceleration of each body."}]}]},{type:a,tag:K,props:{},children:[{type:c,value:"This is known as a "},{type:a,tag:R,props:{},children:[{type:c,value:"pairwise force calculation"}]},{type:c,value:" - and it get's really, "},{type:a,tag:V,props:{},children:[{type:c,value:"really"}]},{type:c,value:" slow as the number of bodies, "},{type:a,tag:V,props:{},children:[{type:c,value:_}]},{type:c,value:", increases - with a computational complexity of "},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:"height:1.0641em;vertical-align:-0.25em;"},children:[]},{type:a,tag:b,props:{className:[e,n],style:ay},children:[{type:c,value:"O"}]},{type:a,tag:b,props:{className:[ar]},children:[{type:c,value:bv}]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,n],style:aT},children:[{type:c,value:_}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:"height:0.8141em;"},children:[{type:a,tag:b,props:{style:"top:-3.063em;margin-right:0.05em;"},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:c,value:ag}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[al]},children:[{type:c,value:bW}]}]}]}]}]},{type:c,value:". Adapting the above equation for a system of "},{type:a,tag:V,props:{},children:[{type:c,value:_}]},{type:c,value:" bodies, we can simply sum the forces between each pair of bodies:"}]},{type:a,tag:bg,props:{className:[z,bh]},children:[{type:a,tag:b,props:{className:[bi]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:"height:0.8361em;vertical-align:-0.15em;"},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,P]},children:[{type:c,value:bj}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:N},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,n,f]},children:[{type:c,value:Q}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:T},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[I],style:ae},children:[]},{type:a,tag:b,props:{className:[S]},children:[{type:c,value:G}]},{type:a,tag:b,props:{className:[I],style:ae},children:[]}]},{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:"height:0.8333em;vertical-align:-0.15em;"},children:[]},{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:aI}]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:N},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,n,f]},children:[{type:c,value:Q}]}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:T},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[I],style:aq},children:[]},{type:a,tag:b,props:{className:[bk]},children:[{type:c,value:bT}]},{type:a,tag:b,props:{className:[I],style:aq},children:[]}]},{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:"height:3.881em;vertical-align:-2.0527em;"},children:[]},{type:a,tag:b,props:{className:[aU,bX]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:"height:1.8283em;"},children:[{type:a,tag:b,props:{style:"top:-1.5407em;margin-left:0em;"},children:[{type:a,tag:b,props:{className:[m],style:aB},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:["mtable"]},children:[{type:a,tag:b,props:{className:["col-align-c"]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:"height:1.1333em;"},children:[{type:a,tag:b,props:{style:"top:-3.15em;"},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:c,value:aM}]},{type:a,tag:b,props:{className:[S,f]},children:[{type:c,value:aV}]},{type:a,tag:b,props:{className:[e,n,f],style:O},children:[{type:c,value:ah}]},{type:a,tag:b,props:{className:[S,f]},children:[{type:c,value:aV}]},{type:a,tag:b,props:{className:[e,n,f],style:aT},children:[{type:c,value:_}]}]}]},{type:a,tag:b,props:{style:"top:-2.2611em;"},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,n,f],style:O},children:[{type:c,value:ah}]},{type:a,tag:b,props:{className:[S,f]},children:[{type:a,tag:b,props:{className:[S,f]},children:[{type:a,tag:b,props:{className:[e,"vbox",f]},children:[{type:a,tag:b,props:{className:["thinbox",f]},children:[{type:a,tag:b,props:{className:["rlap",f]},children:[{type:a,tag:b,props:{className:[q],style:"height:0.8889em;vertical-align:-0.1944em;"},children:[]},{type:a,tag:b,props:{className:["inner"]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[S,f]},children:[{type:c,value:"î€ "}]}]}]},{type:a,tag:b,props:{className:["fix"]},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[S,f]},children:[{type:c,value:G}]}]},{type:a,tag:b,props:{className:[e,n,f]},children:[{type:c,value:Q}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:"height:0.6333em;"},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{style:bY},children:[{type:a,tag:b,props:{className:[m],style:aB},children:[]},{type:a,tag:b,props:{},children:[{type:a,tag:b,props:{className:[aU,bZ,b_]},children:[{type:c,value:b$}]}]}]},{type:a,tag:b,props:{style:"top:-4.3em;margin-left:0em;"},children:[{type:a,tag:b,props:{className:[m],style:aB},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,n,f],style:aT},children:[{type:c,value:_}]}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:"height:2.0527em;"},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[I],style:az},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[ar,af]},children:[]},{type:a,tag:b,props:{className:[aJ]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:bU},children:[{type:a,tag:b,props:{style:bV},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,n],style:ay},children:[{type:c,value:D}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:"height:0.7959em;"},children:[{type:a,tag:b,props:{style:"top:-2.4231em;margin-left:-0.0278em;margin-right:0.05em;"},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,n,f],style:O},children:[{type:c,value:am}]}]}]}]},{type:a,tag:b,props:{style:"top:-3.0448em;margin-right:0.05em;"},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:c,value:ag}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:"height:0.413em;"},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]},{type:a,tag:b,props:{style:bn},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[aK],style:bo},children:[]}]},{type:a,tag:b,props:{style:bp},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:N},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,n,f],style:O},children:[{type:c,value:ah}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:ai},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:"height:1.099em;"},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[al,af]},children:[]}]},{type:a,tag:b,props:{className:[I],style:az},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,aN]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:aA},children:[{type:a,tag:b,props:{style:aO},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[e,P]},children:[{type:c,value:D}]}]},{type:a,tag:b,props:{style:aP},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[aQ],style:aR},children:[{type:a,tag:b,props:{className:[e]},children:[{type:c,value:aS}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:N},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,n,f],style:O},children:[{type:c,value:am}]}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:ai},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[bq]},children:[{type:c,value:br}]}]}]}]}]}]},{type:a,tag:K,props:{},children:[{type:c,value:bs},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:aW},children:[]},{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:Q}]}]}]}]}]},{type:c,value:ak},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:bw},children:[]},{type:a,tag:b,props:{className:[e,n],style:O},children:[{type:c,value:ah}]}]}]}]}]},{type:c,value:" are indices for the bodies, and "},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:"height:0.7167em;vertical-align:-0.2861em;"},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,n],style:ay},children:[{type:c,value:D}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:N},children:[{type:a,tag:b,props:{style:"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,n,f],style:O},children:[{type:c,value:am}]}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:ai},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]}]},{type:c,value:ak},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:"height:0.994em;vertical-align:-0.2861em;"},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,aN]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:aA},children:[{type:a,tag:b,props:{style:aO},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[e,P]},children:[{type:c,value:D}]}]},{type:a,tag:b,props:{style:aP},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[aQ],style:aR},children:[{type:a,tag:b,props:{className:[e]},children:[{type:c,value:aS}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:N},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,n,f],style:O},children:[{type:c,value:am}]}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:ai},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]}]},{type:c,value:" are the distance and unit vector between bodies "},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:aW},children:[]},{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:Q}]}]}]}]}]},{type:c,value:ak},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:bw},children:[]},{type:a,tag:b,props:{className:[e,n],style:O},children:[{type:c,value:ah}]}]}]}]}]},{type:c,value:" respectively. In code, this would look something like this:"}]},{type:a,tag:ca,props:{title:"Pairwise Force Calculation"},children:[{type:a,tag:aX,props:{className:[cb],code:"for (int i = 0; i \u003C N; i++) \n{\n    float acceleration_i = 0.f;\n\n    for (int j = 0; j \u003C N; j++) \n    {\n        \u002F\u002F We don't want to calculate the force between a body and itself\n        if (i == j) continue;\n\n        \u002F\u002F Calculate the distance vector between the bodies\n        float3 r_ij = positions[j] - positions[i];\n\n        \u002F\u002F Calculate the magnitude of the distance vector\n        float r_squared = r_ij.x * r_ij.x + r_ij.y * r_ij.y + r_ij.z * r_ij.z;\n\n        \u002F\u002F Calculate the unit vector pointing from body i to body j\n        float3 r_hat = r_ij \u002F sqrtf(r_squared);\n\n        \u002F\u002F Calculate the force between the bodies\n        float force_ij = -G * masses[j] \u002F r_squared;\n\n        \u002F\u002F Add the force to the total acceleration of body i\n        acceleration_i += force_ij * r_hat;\n    }\n    return acceleration_i;\n}\n",language:cc,meta:U},children:[{type:a,tag:cd,props:{},children:[{type:a,tag:aX,props:{__ignoreMap:U},children:[{type:a,tag:b,props:{class:k,line:bx},children:[{type:a,tag:b,props:{class:g},children:[{type:c,value:aY}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:an}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:aC}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ce}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:G}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:as},children:[{type:c,value:aZ}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cf}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:a_}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cg}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:a$}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ch}]}]},{type:a,tag:b,props:{class:k,line:at},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:ci}]}]},{type:a,tag:b,props:{class:k,line:by},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:ba}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:Z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" acceleration_i "}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:G}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:as},children:[{type:c,value:"0."}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:cj}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{class:k,line:bz},children:[{type:a,tag:b,props:{},children:[{type:c,value:au}]}]},{type:a,tag:b,props:{class:k,line:ck},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:ba}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aY}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:an}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:aC}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cl}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:G}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:as},children:[{type:c,value:aZ}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cm}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:a_}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cn}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:a$}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ch}]}]},{type:a,tag:b,props:{class:k,line:co},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:cp}]}]},{type:a,tag:b,props:{class:k,line:cq},children:[{type:a,tag:b,props:{class:W},children:[{type:c,value:"        \u002F\u002F We don't want to calculate the force between a body and itself\n"}]}]},{type:a,tag:b,props:{class:k,line:cr},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bb}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:cs}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ct}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:cu}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" j) "}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:cv}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{class:k,line:cw},children:[{type:a,tag:b,props:{},children:[{type:c,value:au}]}]},{type:a,tag:b,props:{class:k,line:cx},children:[{type:a,tag:b,props:{class:W},children:[{type:c,value:"        \u002F\u002F Calculate the distance vector between the bodies\n"}]}]},{type:a,tag:b,props:{class:k,line:cy},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"        float3 r_ij "}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:G}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:cz}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cA}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aD}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:cz}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:"[i];\n"}]}]},{type:a,tag:b,props:{class:k,line:cB},children:[{type:a,tag:b,props:{},children:[{type:c,value:au}]}]},{type:a,tag:b,props:{class:k,line:cC},children:[{type:a,tag:b,props:{class:W},children:[{type:c,value:"        \u002F\u002F Calculate the magnitude of the distance vector\n"}]}]},{type:a,tag:b,props:{class:k,line:cD},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bb}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:Z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" r_squared "}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:G}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:av}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:aa}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:av}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:aa}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aE}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:av}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ab}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:av}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ab}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aE}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:av}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ac}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:av}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ac}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{class:k,line:cE},children:[{type:a,tag:b,props:{},children:[{type:c,value:au}]}]},{type:a,tag:b,props:{class:k,line:cF},children:[{type:a,tag:b,props:{class:W},children:[{type:c,value:"        \u002F\u002F Calculate the unit vector pointing from body i to body j\n"}]}]},{type:a,tag:b,props:{class:k,line:cG},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"        float3 r_hat "}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:G}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" r_ij "}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aF}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:cH}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:"(r_squared);\n"}]}]},{type:a,tag:b,props:{class:k,line:cI},children:[{type:a,tag:b,props:{},children:[{type:c,value:au}]}]},{type:a,tag:b,props:{class:k,line:cJ},children:[{type:a,tag:b,props:{class:W},children:[{type:c,value:"        \u002F\u002F Calculate the force between the bodies\n"}]}]},{type:a,tag:b,props:{class:k,line:cK},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bb}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:Z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cL}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:G}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aD}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:"G "}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:"masses"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cA}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aF}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" r_squared;\n"}]}]},{type:a,tag:b,props:{class:k,line:cM},children:[{type:a,tag:b,props:{},children:[{type:c,value:au}]}]},{type:a,tag:b,props:{class:k,line:cN},children:[{type:a,tag:b,props:{class:W},children:[{type:c,value:"        \u002F\u002F Add the force to the total acceleration of body i\n"}]}]},{type:a,tag:b,props:{class:k,line:cO},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"        acceleration_i "}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aG}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cL}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" r_hat;\n"}]}]},{type:a,tag:b,props:{class:k,line:cP},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:cQ}]}]},{type:a,tag:b,props:{class:k,line:cR},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:ba}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:"return"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" acceleration_i;\n"}]}]},{type:a,tag:b,props:{class:k,line:cS},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:cT}]}]}]}]}]}]},{type:a,tag:K,props:{},children:[{type:a,tag:V,props:{},children:[{type:c,value:"Snippet: Simplified C++ function to calculate the gravitational force between bodies."}]}]},{type:a,tag:K,props:{},children:[{type:c,value:"There is, however, an issue..."}]},{type:a,tag:K,props:{},children:[{type:c,value:"As the bodies approach each other, the force between them "},{type:a,tag:V,props:{},children:[{type:c,value:"grows without bounds"}]},{type:c,value:", and the simulation becomes unstable. To remedy this, we can introduce a "},{type:a,tag:R,props:{},children:[{type:c,value:"softening parameter"}]},{type:c,value:cU},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:bu},children:[]},{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:bA}]}]}]}]}]},{type:c,value:", which acts as a cut-off distance for the force calculation."}]},{type:a,tag:K,props:{},children:[{type:c,value:"Skipping a few boring derivations (and including a nifty little trick that requires less FLOPS when running on a GPU... more on that later), we can write the force calculation for a system of "},{type:a,tag:V,props:{},children:[{type:c,value:_}]},{type:c,value:" bodies as:"}]},{type:a,tag:bg,props:{className:[z,bh]},children:[{type:a,tag:b,props:{className:[bi]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:"height:0.6331em;vertical-align:-0.15em;"},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,P]},children:[{type:c,value:ax}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:N},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,n,f]},children:[{type:c,value:Q}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:T},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[I],style:ae},children:[]},{type:a,tag:b,props:{className:[S]},children:[{type:c,value:"â‰ˆ"}]},{type:a,tag:b,props:{className:[I],style:ae},children:[]}]},{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:"height:2.5519em;vertical-align:-1.4304em;"},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:c,value:bS}]},{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:aI}]},{type:a,tag:b,props:{className:[I],style:az},children:[]},{type:a,tag:b,props:{className:[aU,bX]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:"height:1.05em;"},children:[{type:a,tag:b,props:{style:"top:-1.8557em;margin-left:0em;"},children:[{type:a,tag:b,props:{className:[m],style:aB},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:c,value:aM}]},{type:a,tag:b,props:{className:[S,f]},children:[{type:c,value:aV}]},{type:a,tag:b,props:{className:[e,n,f],style:O},children:[{type:c,value:ah}]},{type:a,tag:b,props:{className:[S,f]},children:[{type:c,value:aV}]},{type:a,tag:b,props:{className:[e,n,f],style:aT},children:[{type:c,value:_}]}]}]}]},{type:a,tag:b,props:{style:bY},children:[{type:a,tag:b,props:{className:[m],style:aB},children:[]},{type:a,tag:b,props:{},children:[{type:a,tag:b,props:{className:[aU,bZ,b_]},children:[{type:c,value:b$}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:"height:1.4304em;"},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[I],style:az},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[ar,af]},children:[]},{type:a,tag:b,props:{className:[aJ]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:"height:1.1214em;"},children:[{type:a,tag:b,props:{style:"top:-2.1704em;"},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[ar]},children:[{type:c,value:bv}]},{type:a,tag:b,props:{className:[e]},children:[{type:c,value:cV}]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,P]},children:[{type:c,value:D}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:N},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,n,f],style:O},children:[{type:c,value:am}]}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:ai},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e]},children:[{type:c,value:cV}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:bl},children:[{type:a,tag:b,props:{style:bm},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:c,value:ag}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[I],style:aq},children:[]},{type:a,tag:b,props:{className:[bk]},children:[{type:c,value:aE}]},{type:a,tag:b,props:{className:[I],style:aq},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:bA}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:bl},children:[{type:a,tag:b,props:{style:bm},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:c,value:ag}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[al]},children:[{type:a,tag:b,props:{className:[al]},children:[{type:c,value:bW}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:"height:0.9396em;"},children:[{type:a,tag:b,props:{style:"top:-3.3486em;margin-right:0.05em;"},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[ar,af,p,bc,cW]},children:[]},{type:a,tag:b,props:{className:[aJ]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:"height:0.8443em;"},children:[{type:a,tag:b,props:{style:"top:-2.656em;"},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[p,bc,cX,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:c,value:ag}]}]}]}]},{type:a,tag:b,props:{style:"top:-3.2255em;"},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[aK,f],style:"border-bottom-width:0.049em;"},children:[]}]},{type:a,tag:b,props:{style:"top:-3.384em;"},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[p,bc,cX,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:c,value:"3"}]}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:"height:0.344em;"},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[al,af,p,bc,cW]},children:[]}]}]}]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{style:bn},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[aK],style:bo},children:[]}]},{type:a,tag:b,props:{style:bp},children:[{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:N},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,n,f],style:O},children:[{type:c,value:ah}]}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:ai},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,P]},children:[{type:c,value:D}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:N},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,n,f],style:O},children:[{type:c,value:am}]}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:ai},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:"height:1.1157em;"},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[al,af]},children:[]}]},{type:a,tag:b,props:{className:[bq]},children:[{type:c,value:br}]}]}]}]}]}]},{type:a,tag:K,props:{},children:[{type:c,value:bs},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:cY},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,P]},children:[{type:c,value:ax}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:N},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,n,f]},children:[{type:c,value:Q}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:T},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]}]},{type:c,value:" is the acceleration of body "},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:aW},children:[]},{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:Q}]}]}]}]}]},{type:c,value:cU},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:"height:0.7305em;vertical-align:-0.2861em;"},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,P]},children:[{type:c,value:D}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:N},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,f]},children:[{type:a,tag:b,props:{className:[e,n,f],style:O},children:[{type:c,value:am}]}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:ai},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]}]},{type:c,value:" is the distance vector between bodies "},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:aW},children:[]},{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:Q}]}]}]}]}]},{type:c,value:ak},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:bw},children:[]},{type:a,tag:b,props:{className:[e,n],style:O},children:[{type:c,value:ah}]}]}]}]}]},{type:c,value:", and "},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:bu},children:[]},{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:bA}]}]}]}]}]},{type:c,value:" is the softening parameter. Notice that "},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:bt},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:N},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,n,f]},children:[{type:c,value:Q}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:T},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]}]},{type:c,value:" is not required anymore, as "},{type:a,tag:b,props:{className:[z,F]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[B],ariaHidden:C},children:[{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:cY},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,P]},children:[{type:c,value:ax}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:N},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,n,f]},children:[{type:c,value:Q}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:T},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[I],style:ae},children:[]},{type:a,tag:b,props:{className:[S]},children:[{type:c,value:G}]},{type:a,tag:b,props:{className:[I],style:ae},children:[]}]},{type:a,tag:b,props:{className:[r]},children:[{type:a,tag:b,props:{className:[q],style:"height:1em;vertical-align:-0.25em;"},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,P]},children:[{type:c,value:bj}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:N},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,n,f]},children:[{type:c,value:Q}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:T},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[e]},children:[{type:c,value:aF}]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,n]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:b,props:{className:[o,u]},children:[{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:N},children:[{type:a,tag:b,props:{style:J},children:[{type:a,tag:b,props:{className:[m],style:v},children:[]},{type:a,tag:b,props:{className:[p,s,t,f]},children:[{type:a,tag:b,props:{className:[e,n,f]},children:[{type:c,value:Q}]}]}]}]},{type:a,tag:b,props:{className:[w]},children:[{type:c,value:x}]}]},{type:a,tag:b,props:{className:[h]},children:[{type:a,tag:b,props:{className:[i],style:T},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]}]},{type:c,value:". Let's take a look at how this would look programatically:"}]},{type:a,tag:ca,props:{title:"CPU Force Calculation"},children:[{type:a,tag:aX,props:{className:[cb],code:"void bodyBodyInteraction(float4* pos, float4* acc, int N)\n{\n    for (int i = 0; i \u003C N; i++)\n    {\n        for (int j = 0; j \u003C N; j++)\n        {\n            if (i == j)\n                continue;\n            \n            float3 r;\n    \n            \u002F\u002F r_ij -\u003E AU [distance]\n            r.x = pos[j].x - pos[i].x;\n            r.y = pos[j].y - pos[i].y;\n            r.z = pos[j].z - pos[i].z;\n    \n            \u002F\u002F distance squared == dot(r_ij, r_ij) + softening^2\n            float distSqr = r.x * r.x + r.y * r.y + r.z * r.z;\n            distSqr += SOFTENING * SOFTENING;\n    \n            \u002F\u002F inverse distance cubed == 1 \u002F distSqr^(3\u002F2) [fastest method]\n            float distSixth = distSqr * distSqr * distSqr;\n            float invDistCube = 1.0f \u002F sqrtf(distSixth);\n    \n            \u002F\u002F force = mass_j * inverse distance cube\n            float f = pos[j].w * invDistCube;\n    \n            \u002F\u002F acceleration = acceleration_i + force * r_ij\n            force[i].x += r.x * f * (float)BIG_G;\n            force[i].y += r.y * f * (float)BIG_G;\n            force[i].z += r.z * f * (float)BIG_G;\n        }\n    }\n}\n",language:cc,meta:U},children:[{type:a,tag:cd,props:{},children:[{type:a,tag:aX,props:{__ignoreMap:U},children:[{type:a,tag:b,props:{class:k,line:bx},children:[{type:a,tag:b,props:{class:L},children:[{type:c,value:"void"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:"bodyBodyInteraction"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bv}]},{type:a,tag:b,props:{class:cZ},children:[{type:c,value:c_}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" pos, "}]},{type:a,tag:b,props:{class:cZ},children:[{type:c,value:c_}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" acc, "}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:aC}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" N)\n"}]}]},{type:a,tag:b,props:{class:k,line:at},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:ci}]}]},{type:a,tag:b,props:{class:k,line:by},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:ba}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aY}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:an}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:aC}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ce}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:G}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:as},children:[{type:c,value:aZ}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cf}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:a_}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cg}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:a$}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:c$}]}]},{type:a,tag:b,props:{class:k,line:bz},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:cp}]}]},{type:a,tag:b,props:{class:k,line:ck},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bb}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aY}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:an}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:aC}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cl}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:G}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:as},children:[{type:c,value:aZ}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cm}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:a_}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cn}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:a$}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:c$}]}]},{type:a,tag:b,props:{class:k,line:co},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"        {\n"}]}]},{type:a,tag:b,props:{class:k,line:cq},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:X}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:cs}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ct}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:cu}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" j)\n"}]}]},{type:a,tag:b,props:{class:k,line:cr},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"                "}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:cv}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{class:k,line:cw},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"            \n"}]}]},{type:a,tag:b,props:{class:k,line:cx},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"            float3 r;\n"}]}]},{type:a,tag:b,props:{class:k,line:cy},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:aH}]}]},{type:a,tag:b,props:{class:k,line:cB},children:[{type:a,tag:b,props:{class:W},children:[{type:c,value:"            \u002F\u002F r_ij -\u003E AU [distance]\n"}]}]},{type:a,tag:b,props:{class:k,line:cC},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:X}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:aa}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:G}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ao}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bd}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:aa}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aD}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ao}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aw}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:aa}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{class:k,line:cD},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:X}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ab}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:G}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ao}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bd}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ab}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aD}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ao}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aw}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ab}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{class:k,line:cE},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:X}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ac}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:G}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ao}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bd}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ac}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aD}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ao}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aw}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ac}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{class:k,line:cF},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:aH}]}]},{type:a,tag:b,props:{class:k,line:cG},children:[{type:a,tag:b,props:{class:W},children:[{type:c,value:"            \u002F\u002F distance squared == dot(r_ij, r_ij) + softening^2\n"}]}]},{type:a,tag:b,props:{class:k,line:cI},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:X}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:Z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bB}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:G}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:aa}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:aa}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aE}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ab}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ab}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aE}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ac}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ac}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{class:k,line:cJ},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"            distSqr "}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aG}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" SOFTENING "}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" SOFTENING;\n"}]}]},{type:a,tag:b,props:{class:k,line:cK},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:aH}]}]},{type:a,tag:b,props:{class:k,line:cM},children:[{type:a,tag:b,props:{class:W},children:[{type:c,value:"            \u002F\u002F inverse distance cubed == 1 \u002F distSqr^(3\u002F2) [fastest method]\n"}]}]},{type:a,tag:b,props:{class:k,line:cN},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:X}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:Z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" distSixth "}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:G}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bB}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bB}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" distSqr;\n"}]}]},{type:a,tag:b,props:{class:k,line:cO},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:X}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:Z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" invDistCube "}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:G}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:as},children:[{type:c,value:"1.0"}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:cj}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aF}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:cH}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:"(distSixth);\n"}]}]},{type:a,tag:b,props:{class:k,line:cP},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:aH}]}]},{type:a,tag:b,props:{class:k,line:cR},children:[{type:a,tag:b,props:{class:W},children:[{type:c,value:"            \u002F\u002F force = mass_j * inverse distance cube\n"}]}]},{type:a,tag:b,props:{class:k,line:cS},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:X}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:Z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:be}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:G}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ao}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bd}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:"w"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" invDistCube;\n"}]}]},{type:a,tag:b,props:{class:k,line:27},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:aH}]}]},{type:a,tag:b,props:{class:k,line:28},children:[{type:a,tag:b,props:{class:W},children:[{type:c,value:"            \u002F\u002F acceleration = acceleration_i + force * r_ij\n"}]}]},{type:a,tag:b,props:{class:k,line:29},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:X}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:bC}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aw}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:aa}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aG}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:aa}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:be}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:an}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:Z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bD}]}]},{type:a,tag:b,props:{class:k,line:30},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:X}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:bC}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aw}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ab}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aG}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ab}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:be}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:an}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:Z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bD}]}]},{type:a,tag:b,props:{class:k,line:31},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:X}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:bC}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aw}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ac}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:aG}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:ac}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:be}]},{type:a,tag:b,props:{class:g},children:[{type:c,value:H}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:an}]},{type:a,tag:b,props:{class:L},children:[{type:c,value:Z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bD}]}]},{type:a,tag:b,props:{class:k,line:32},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"        }\n"}]}]},{type:a,tag:b,props:{class:k,line:33},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:cQ}]}]},{type:a,tag:b,props:{class:k,line:34},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:cT}]}]}]}]}]}]},{type:a,tag:"style",children:[{type:c,value:".ct-149616{color:#859900;}\n.ct-428888{color:#657B83;}\n.ct-880161{color:#586E75;font-weight:bold;}\n.ct-589151{color:#D33682;}\n.ct-561204{color:#93A1A1;font-style:italic;}\n.ct-912143{color:#268BD2;}\n.ct-586139{color:#CB4B16;}"}]}],toc:{title:U,searchDepth:at,depth:at,links:[{id:bK,depth:at,text:bL,children:[{id:bM,depth:by,text:bN}]},{id:bQ,depth:at,text:bR}]}},_type:da,_id:"content:projects:nbody.md",_source:db,_file:"projects\u002Fnbody.md",_extension:dc}},"$sdd-surrounds":{"/projects/nbody":[{_path:dd,_dir:bG,_draft:Y,_partial:Y,_locale:U,_empty:Y,title:de,description:"This is a test project post.",navTitle:df,tag:"Proxmox",date:"2023-06-01",_type:da,_id:"content:projects:firstblog.md",_source:db,_file:"projects\u002Ffirstblog.md",_extension:dc},null]},"$sdd-globals":{},"$sdd-navigation":[{title:dg,_path:"\u002Fprojects",children:[{title:de,_path:dd,navTitle:df},{title:bH,_path:bF,layout:bI}],navTitle:dg},{title:dh,_path:"\u002Fabout",navTitle:dh}]},_errors:{},serverRendered:ap,config:{public:{content:{locales:[],defaultLocale:U,integrity:1702767027150,experimental:{stripQueryParameters:Y,clientDB:Y},api:{baseURL:"\u002Fapi\u002F_content"},navigation:{fields:["navTitle","layout"]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{theme:"solarized-light"},wsUrl:U,documentDriven:{page:ap,navigation:ap,surround:ap,globals:{},layoutFallbacks:["theme"],injectPage:ap},host:U,trailingSlash:Y,anchorLinks:{depth:bz,exclude:[bx]}}},app:{baseURL:aF,buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:U}},prerenderedAt:void 0}}("element","span","text","ct-428888","mord","mtight","ct-149616","vlist-r","vlist","ct-912143","line"," ","pstrut","mathnormal","vlist-t","sizing","strut","base","reset-size6","size3","vlist-t2","height:2.7em;","vlist-s","â€‹","msupsub","math","katex","katex-html","true","r","height:3em;","math-inline","=","*","mspace","top:-2.55em;margin-left:0em;margin-right:0.05em;","p","ct-880161",".","height:0.3117em;","margin-right:0.05724em;","mathbf","i","strong","mrel","height:0.15em;","","em","ct-561204","            ",false,"float","N","m","x","y","z","li","margin-right:0.2778em;","nulldelimiter","2","j","height:0.2861em;",";\n"," and ","mclose","ij"," (","pos",true,"margin-right:0.2222em;","mopen","ct-589151",2,"\n","r_ij","[i].","a","margin-right:0.02778em;","margin-right:0.1667em;","height:0.7079em;","height:3.05em;","int","-","+","\u002F","+=","    \n","G","mfrac","frac-line","height:0.3011em;","1","accent","top:-3em;","top:-3.0134em;","accent-body","left:-0.1944em;","^","margin-right:0.10903em;","mop","â‰¤","height:0.6595em;","code","for","0","\u003C","++","    ","        ","reset-size3","[j]."," f ","ol","div","math-display","katex-display","F","mbin","height:0.7401em;","top:-2.989em;margin-right:0.05em;","top:-3.23em;","border-bottom-width:0.04em;","top:-3.677em;","mpunct",",","where ","height:0.5806em;vertical-align:-0.15em;","height:0.4306em;","(","height:0.854em;vertical-align:-0.1944em;",1,3,4,"Ïµ"," distSqr ","force",")BIG_G;\n","system","\u002Fprojects\u002Fnbody","projects","N-body Modelling of Young Stellar Systems","project","h2","intro","Intro","what-are-n-body-simulations","What are N-body Simulations?","nofollow","bodies","the-physics","The Physics","âˆ’","â‹…","height:1.1076em;","top:-2.314em;",")","op-limits","top:-3.05em;","op-symbol","large-op","âˆ‘","terminal","language-cpp","cpp","pre"," i ","; i "," N; i",") \n","{\n","f",5," j ","; j "," N; j",6,"    {\n",7,8,"if"," (i ","==","continue",9,10,11,"positions","[j] ",12,13,14,15,16,17,"sqrtf",18,19,20," force_ij ",21,22,23,24,"    }\n",25,26,"}",", ","âˆ¥","size6","size1","height:0.5944em;vertical-align:-0.15em;","ct-586139","float4",")\n","markdown","content","md","\u002Fprojects\u002Ffirstblog","First Project Post","Test Piece","Projects","About")))}</script><script type="module" src="/_nuxt/entry.ae246550.js" crossorigin></script><script type="module" src="/_nuxt/document-driven.c32a1447.js" crossorigin></script><script type="module" src="/_nuxt/project.cf9f4f3b.js" crossorigin></script><script type="module" src="/_nuxt/ProseH2.e03688e7.js" crossorigin></script><script type="module" src="/_nuxt/ProseP.7a14b8bf.js" crossorigin></script><script type="module" src="/_nuxt/ProseStrong.f52eede9.js" crossorigin></script><script type="module" src="/_nuxt/ProseOl.10d538bc.js" crossorigin></script><script type="module" src="/_nuxt/ProseLi.294434fe.js" crossorigin></script><script type="module" src="/_nuxt/ProseH3.52d68a4c.js" crossorigin></script><script type="module" src="/_nuxt/ProseA.c7ae6832.js" crossorigin></script><script type="module" src="/_nuxt/ProseEm.7b13c7eb.js" crossorigin></script><script type="module" src="/_nuxt/Terminal.00588cbd.js" crossorigin></script></body>
</html>